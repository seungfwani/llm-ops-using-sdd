kserve:
  enabled: true
  namespaceOverride: ""
  version: v0.16.0
  setDefaultDeploymentMode: true
  selfSignedCert:
    enabled: true
    serviceName: kserve-webhook-server-service
    secretName: kserve-webhook-server-cert
    image: bitnami/kubectl:latest

gpuPlugin:
  enabled: true

nvidia-device-plugin:
  namespaceOverride: kube-system

  config:
    # ConfigMap 안에서 디폴트로 사용할 config 이름
    default: config.yaml

    # 여기부터가 실제 config 내용 (파일명: 내용)
    map:
      config.yaml: |-
        version: v1
        sharing:
          timeSlicing:
            resources:
              - name: nvidia.com/gpu
                replicas: 10

  args:
    - --fail-on-init-error=false
    - --config-file=/config/config.yaml

dependencies:
  postgresql:
    enabled: true
    storage: 5Gi
    image: postgres:16-alpine
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 250m
        memory: 256Mi
    service:
      type: NodePort
      port: 5432
      nodePort: 30001
    secret:
      user: llmops
      password: password
      db: llmops
  redis:
    enabled: true
    image: redis:7-alpine
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 200m
        memory: 256Mi
    service:
      type: ClusterIP
      port: 6379
  minio:
    enabled: true
    storage: 50Gi
    image: minio/minio:latest
    resources:
      requests:
        cpu: 100m
        memory: 256Mi
      limits:
        cpu: 250m
        memory: 512Mi
    service:
      type: NodePort
      ports:
        api: 9000
        console: 9001
      nodePorts:
        api: 30002
        console: 30003
    secret:
      accessKey: llmops
      secretKey: llmops-secret

objectStore:
  # bucket이 비어있으면 자동으로 네임스페이스 이름을 사용합니다
  bucket: ""
  endpoint: http://minio:9000
  createBucket: true
  jobImage: quay.io/minio/mc:latest
  credentials:
    accessKey: llmops
    secretKey: llmops-secret
  config:
    endpointUrl: http://minio:9000

minioBucketJob:
  enabled: true

# ServiceAccount and RBAC for backend API server
# Required for Kubernetes API access (deploying InferenceServices, Deployments, etc.)
serviceAccount:
  create: true
  # If not set, uses the default service account name from _helpers.tpl
  # name: ""

rbac:
  create: true
  # ClusterRole and ClusterRoleBinding will be created with permissions
  # to manage Deployments, Services, Ingresses, HPA, and KServe InferenceServices

# Application (Frontend + Backend) Configuration
app:
  enabled: true
  replicas: 1
  
  image:
    repository: llm-ops-platform
    tag: "0.1.0"
    pullPolicy: IfNotPresent
  
  service:
    type: ClusterIP
    port: 8000
    # nodePort: 30000  # Uncomment and set if type is NodePort
  
  # Database connection URL
  # Format: postgresql+psycopg://user:password@host:port/dbname
  databaseUrl: "postgresql+psycopg://llmops:password@postgresql:5432/llmops"
  
  # Redis connection URL
  # Format: redis://host:port/db
  redisUrl: "redis://redis:6379/0"
  
  # Object store endpoint
  objectStoreEndpoint: "http://minio:9000"
  
  # Application settings
  useKserve: true
  useGpu: false
  logLevel: "INFO"
  
  # Resource limits
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 2000m
      memory: 2Gi
  
  # Health check probes
  livenessProbe:
    httpGet:
      path: /llm-ops/v1/health
      port: http
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
  
  readinessProbe:
    httpGet:
      path: /llm-ops/v1/health
      port: http
    initialDelaySeconds: 10
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 3
  
  # Optional: Override service account name
  # serviceAccountName: ""
  
  # Optional: Node selector for pod placement
  # nodeSelector: {}
  
  # Optional: Tolerations for tainted nodes
  # tolerations: []
  
  # Optional: Affinity rules
  # affinity: {}
  
  # Optional: Additional environment variables
  # extraEnv: []
